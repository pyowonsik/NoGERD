---
description: 기능 구현을 위한 상세 단계별 계획 수립. thoughts/shared/plans/에 저장
allowed-tools: Read, Grep
argument-hint: [feature-name or @research-file]
---

# 구현 계획 수립

## 목표

새로운 기능이나 리팩토링을 위한 상세한 단계별 실행 계획을 작성합니다.
계획은 `thoughts/shared/plans/` 디렉토리에 저장됩니다.

## 사전 준비

1. **연구 문서 참조** (있는 경우)
   - `thoughts/shared/research/` 디렉토리의 관련 문서 읽기
   - 기존 코드베이스 이해

2. **현재 상태 파악**
   - 기존 구현 확인
   - 의존성 체크
   - 영향 받는 모듈 파악

## 계획 수립 프로세스

### 1. 요구사항 명확화
- 무엇을 구현할 것인가?
- 왜 필요한가?
- 성공 기준은 무엇인가?

### 2. 기술적 접근 방식
- 어떤 아키텍처 패턴 사용?
- 어떤 라이브러리/패키지 필요?
- 기존 코드와의 통합 방법

### 3. 단계별 작업 분해
- Phase 1: 준비 및 기반 작업
- Phase 2: 핵심 기능 구현
- Phase 3: 통합 및 테스트
- Phase 4: 최적화 및 문서화

### 4. 리스크 분석
- 잠재적 문제점
- 의존성 충돌 가능성
- 완화 방안

### 5. 검증 방법
- 단위 테스트 계획
- 통합 테스트 계획
- 수동 테스트 시나리오

## 결과 형식

### 파일명
`thoughts/shared/plans/[feature-name]_plan_[날짜].md`

예: `thoughts/shared/plans/playlist_feature_plan_2026-01-09.md`

### 내용 구조

```markdown
# [기능명] 구현 계획

**날짜**: 2026-01-09
**작성자**: Claude
**관련 연구 문서**: thoughts/shared/research/...md (있는 경우)

## 1. 요구사항

### 기능 개요
[무엇을 만들 것인가]

### 목표
- 목표 1
- 목표 2

### 성공 기준
- [ ] 기준 1
- [ ] 기준 2

## 2. 기술적 접근

### 아키텍처 선택
[Clean Architecture / MVVM 등]

### 사용할 패키지
- package_name: 용도

### 파일 구조
```
lib/
├── features/
│   └── new_feature/
│       ├── data/
│       ├── domain/
│       └── presentation/
```

## 3. 구현 단계

### Phase 1: 준비 및 기반 작업
**목표**: 기본 구조 및 의존성 설정

**작업 목록**:
- [ ] pubspec.yaml에 필요한 패키지 추가
- [ ] 기본 디렉토리 구조 생성
- [ ] 모델 클래스 정의

**예상 영향**:
- 영향 받는 파일: pubspec.yaml, lib/core/...
- 의존성: 없음

**검증 방법**:
- [ ] 빌드 성공 확인
- [ ] 모델 단위 테스트

---

### Phase 2: 핵심 기능 구현
**목표**: 주요 비즈니스 로직 구현

**작업 목록**:
- [ ] Repository 구현
- [ ] Use Case 구현
- [ ] ViewModel/Provider 구현

**예상 영향**:
- 영향 받는 파일: lib/features/...
- 의존성: Phase 1 완료 필요

**검증 방법**:
- [ ] 단위 테스트 통과
- [ ] 로직 검증

---

### Phase 3: UI 구현
**목표**: 사용자 인터페이스 구현

**작업 목록**:
- [ ] 위젯 구현
- [ ] 라우팅 연결
- [ ] 상태 관리 연결

**예상 영향**:
- 영향 받는 파일: lib/features/.../presentation/
- 의존성: Phase 2 완료 필요

**검증 방법**:
- [ ] 화면 렌더링 확인
- [ ] 사용자 시나리오 테스트

---

### Phase 4: 통합 및 최적화
**목표**: 전체 시스템 통합 및 성능 최적화

**작업 목록**:
- [ ] 기존 기능과 통합
- [ ] 성능 최적화 (const, lazy loading 등)
- [ ] 에러 핸들링 추가

**예상 영향**:
- 영향 받는 파일: 여러 파일
- 의존성: Phase 3 완료 필요

**검증 방법**:
- [ ] 통합 테스트
- [ ] 성능 프로파일링

## 4. 리스크 및 대응

### 리스크 1: [설명]
- **확률**: High/Medium/Low
- **영향도**: High/Medium/Low
- **완화 방안**: [대응책]

## 5. 전체 검증 계획

### 자동 테스트
- [ ] 단위 테스트 작성 및 실행
- [ ] 위젯 테스트
- [ ] 통합 테스트

### 수동 테스트
- [ ] 시나리오 1: [설명]
- [ ] 시나리오 2: [설명]

### 성능 체크
- [ ] 빌드 시간
- [ ] 앱 실행 속도
- [ ] 메모리 사용량

## 6. 참고 사항

- [주의할 점]
- [참고 문서 링크]
```

## 주의사항

- **5회 이상 계획 정교화**: 초안 작성 후 여러 번 검토하며 개선
- **구체적인 파일 경로 명시**: "lib/features/..." 같은 실제 경로 사용
- **각 Phase는 독립적으로 완료 가능**: 단계별로 완성도 확보
- **검증 방법 반드시 포함**: 각 단계마다 확인 방법 명시
- **60% 컨텍스트 체크**: 초과 시 문서 저장 후 /clear
